<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Busca de Artigos - Fismat 2025</title>
</head>
<body>
    <h1>Busca de Artigos por Autor</h1>

    <input type="text" id="authorInput" placeholder="Digite o nome do autor">
    <button onclick="buscarArtigos()">Buscar</button>

    <h2>Resultados:</h2>
    <div id="resultados"></div>

    <script>
        async function buscarArtigos() {
            const autor = document.getElementById("authorInput").value;
            const div = document.getElementById("resultados");
            div.innerHTML = "Carregando...";

            try {
                const resposta = await fetch("https://spring-glade-d911.fismat.workers.dev/?author=" + encodeURIComponent(autor));

                if (!resposta.ok) {
                    throw new Error("Erro na requisição");
                }

                const dados = await resposta.json();

                if (dados.entries.length === 0) {
                    div.innerHTML = "Nenhum artigo encontrado.";
                    return;
                }

                div.innerHTML = dados.entries
                    .map(artigo => `
                        <p>
                            <strong>${artigo.title}</strong><br>
                            ${artigo.authors.join(", ")}<br>
                            <a href="${artigo.link}" target="_blank">Acessar artigo</a>
                        </p>
                    `)
                    .join("");
            } catch (erro) {
                div.innerHTML = "Erro ao carregar os dados: " + erro.message;
            }
        }
    </script>

</body>
</html>
